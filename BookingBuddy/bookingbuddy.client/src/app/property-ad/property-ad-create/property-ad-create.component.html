<div class="w-100 d-flex flex-column align-items-center justify-content-between" [ngSwitch]="currentStep" style="height: 100vh;">
  <div *ngSwitchCase="1"
       class="w-100 flex-grow-1 p-5 d-flex flex-column flex-column align-items-center justify-content-center">
    <div class="fs-1 p-3 fw-bold">Onde fica a sua propriedade?</div>
    <div class="fs-6 p-2">O seu endereço só é partilhado com os hóspedes depois de eles terem feito a reserva.</div>
    <form class="d-flex w-100 align-items-center justify-content-center p5" [formGroup]="locationForm">
      <div class="input-form-field input-group has-validation py-3 ">
        <i class="input-group-text bi bi-geo-alt-fill"
           [ngClass]="{'text-success':locationFormField?.valid && locationFormField?.dirty,'text-danger':locationFormField?.invalid && locationFormField?.dirty}"></i>
        <input type="text" id="location" class="form-control" formControlName="location"
               placeholder="Introduza a localização da sua propriedade"
               [ngClass]="{'is-valid':locationFormField?.valid && locationFormField?.dirty,'is-invalid':locationFormField?.invalid && locationFormField?.dirty}"/>
        <div id="validationServerUsernameFeedback" class="invalid-feedback">
          Por favor introduza a localização da sua propriedade.
        </div>
      </div>
    </form>
    <div class="google-maps mx-auto h-100">
      <google-map class="mb-5"
                  width="100%"
                  height="100%"
                  [center]="center"
                  [zoom]="zoom"
                  (mapClick)="setLocation($event)"
                  [options]="options">
        <map-marker *ngIf="display" [position]="display" [options]="markerOptions"></map-marker>
      </google-map>
    </div>
  </div>
  <div *ngSwitchCase="2"
       class="w-100 h-75 p-5 d-flex flex-column flex-column align-items-center justify-content-start" style="">
    <div class="fs-1 p-3 fw-bold">O que é que a sua propriedade oferece?</div>
    <div class="fs-6 p-2">Seleciona as comodidades oferecidas pela sua propriedade.</div>
    <div class="d-flex h-100 p-3 w-50 flex-row flex-wrap align-content-start justify-content-start overflow-hidden">
      <app-amenity class="my-3" *ngFor="let amenity of AmenitiesHelper.getAmenities()" [amenity]="amenity"></app-amenity>
      <app-amenity class="my-3" *ngFor="let amenity of AmenitiesHelper.getAmenities()" [amenity]="amenity"></app-amenity>
    </div>
  </div>
  <div *ngSwitchDefault
       class="w-100 flex-grow-1 p-5 d-flex flex-column flex-column align-items-center justify-content-center">
    <div class="d-flex flex-row h-100 w-100 text-center align-items-center justify-content-center">
      <div class="d-flex w-50 flex-column align-items-center">
        <span class="h1 mb-5">Bem-vindo ao assistente de criação de anúncios!</span>
        <span class="fs-5">Vamos começar por preencher os campos básicos do seu anúncio.</span>
      </div>
      <div class="d-flex flex-grow-1 h-100">
        <img class="flex-grow-1 m-auto image-right"
             src="https://i.pinimg.com/originals/fb/43/b2/fb43b2ef58e824f3ec1f640bf5bd996b.gif" alt="multiple houses">
      </div>
    </div>
  </div>
  <div class="d-flex flex-column align-items-start justify-content-start bg-white"
       style="width: 100vw;height: 12%">
    <div class="progress w-100 rounded-0" role="progressbar" aria-label="Basic example" aria-valuenow="0"
         aria-valuemin="0" aria-valuemax="100">
      <div class="progress-bar" [style.width.%]="currentCompletePercentage"></div>
    </div>
    <div class="w-100 h-100 d-flex flex-row align-items-center justify-content-between" [ngSwitch]="currentStep">
      <button *ngIf="currentCompletePercentage === 0" class="bottom-button btn btn-danger px-2 mx-5 h-50"
              [routerLink]="['/']">
        Cancelar
      </button>
      <button *ngIf="currentCompletePercentage !== 0" class="bottom-button btn btn-secondary px-2 mx-5 h-50"
              (click)="previousStep()">
        Anterior
      </button>
      <button *ngSwitchCase="1" class="bottom-button btn btn-primary px-2 mx-5 h-50"
              [disabled]="!locationForm.valid"
              (click)="nextStep()">
        Seguinte
      </button>
      <button *ngSwitchCase="2" class="bottom-button btn btn-primary px-2 mx-5 h-50"
              (click)="nextStep()">
        Seguinte
      </button>
      <button *ngSwitchCase="3" class="bottom-button btn btn-primary px-2 mx-5 h-50"
              (click)="nextStep()">
        Seguinte
      </button>
      <button *ngSwitchDefault class="bottom-button btn btn-primary px-2 mx-5 h-50"
              (click)="nextStep()">
        Seguinte
      </button>
    </div>
  </div>
</div>

<div *ngIf="submitting" class="d-flex w-100 h-100 flex-column align-items-center justify-content-center">
  <app-loader></app-loader>
</div>
